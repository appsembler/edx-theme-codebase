<%! from django.utils.translation import ugettext as _ %>
<%! from django.http.response import Http404 %>
<%inherit file="../main.html" />

<%namespace file='/theme-variables.html' import="get_news_content, get_global_settings" />

<%block name="pagetitle">
    ${_("News")}
</%block>

% if get_global_settings().get('page_status', {}).get('news', True):
  % for element in get_news_content():
    % if (element['element-type'].startswith('layout')):
      <%include file = '/${element["element-path"]}' args = "options = element['options'], children = element['children'], page_specific_args = []" />
    % elif (element['element-type'].startswith('static-block')):
      <%include file = '/${element["element-path"]}' args = "template_settings = element['options']" />
    % endif
  % endfor
% else:
  <% raise Http404 %>
% endif
