<%inherit file="../main.html" />
<%namespace name='static' file='../static_content.html'/>
<%!
from django.utils.translation import ugettext as _
from courseware.courses import get_course_info_section, get_course_date_summary

from openedx.core.djangoapps.self_paced.models import SelfPacedConfiguration
%>

<%block name="pagetitle">${_("{course_number} Course Info").format(course_number=course.display_number_with_default)}</%block>

<%block name="headextra">
<%static:css group='style-course-vendor'/>
<%static:css group='style-course'/>
</%block>

% if show_enroll_banner:
  <section class="a--courseware-banner__wrapper">
    <div class="a--courseware-banner__container bs-container a--container">
      <h2>${_("You are not enrolled yet")}</h2>
      <p>${_(u"You are not currently enrolled in this course. {link_start}Sign up now!{link_end}").format(
      link_start=u"<a href={}>".format(url_to_enroll),
      link_end=u"</a>"
      )}</p>
    </div>
  </section>
% endif

<%include file="/courseware/course_navigation.html" args="active_page='info'" />

<%block name="js_extra">
  <script type="text/javascript" src="${static.url('js/jquery.treeview.js')}"></script>
  <script type="text/javascript" charset="utf-8">
$(document).ready(function(){
    $(".handouts").treeview({collapsed:true, unique:true/*, cookieId: "treeview-book-nav", persist: "cookie"*/});
    });
  </script>
</%block>

<section class="a--courseware-wrapper">
  % if user.is_authenticated():

    <div class="a--courseware-wrapper__admin-notifications bs-container a--container">
      <a class="a--courseware-wrapper__admin-notifications__cta" href="${studio_url}">${_("View Updates in Studio")}</a>
    </div>
    
  % endif


  <div class="a--courseware-wrapper__content bs-container a--container a--course-updates">
    % if user.is_authenticated():
      <section class="a--courseware-wrapper__content__main-content a--course-info">
        <h1 class="a--course-info__main-title">${_("Course Updates &amp; News")}</h1>
        ${get_course_info_section(request, course, 'updates')}
      </section>
      <section aria-label="${_('Handout Navigation')}" class="a--courseware-wrapper__content__sidebar a--course-handouts">
        % if False:
          <h1 class="a--courseware-wrapper__content__sidebar__main-title">${_("Important Course Dates")}</h1>
          ${get_course_date_summary(course, user)}
        % endif

        <h1 class="a--courseware-wrapper__content__sidebar__main-title">${_(course.info_sidebar_name)}</h1>
        ${get_course_info_section(request, course, 'handouts')}
      </section>
      % else:
      <section class="updates">
        <h1 class="a--courseware-wrapper__content__sidebar__main-title">${_("Course Updates &amp; News")}</h1>
        ${get_course_info_section(request, course, 'guest_updates')}
      </section>
      <section aria-label="${_('Handout Navigation')}" class="handouts">
        <h1 class="a--courseware-wrapper__content__sidebar__main-title">${_("Course Handouts")}</h1>
        ${get_course_info_section(request, course, 'guest_handouts')}
      </section>
    % endif
  </div>
</section>
